{% extends "base.html" %} 
{% block body_class %}type-article{% endblock %}
{% block html_lang %}{{ article.lang }}{% endblock %}
{% block title %}{{ article.title|striptags }}{% endblock %} {% block head %} {{
super() }} {% if article.translations -%}
<link rel="alternate" href="{{ SITEURL }}/{{ article.url }}" hreflang="{{ article.lang }}" />
{% for a in article.translations %}
<link rel="alternate" href="{{ SITEURL }}/{{ a.url }}" hreflang="{{ a.lang }}" />
{% endfor %}
{% endif %}
{% if article.description %}
<meta name="description" content="{{article.description}}" />
{% endif %} {% for tag in article.tags %}
<meta name="tags" content="{{tag}}" />
{% endfor %}
<link rel="stylesheet" type="text/css" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/copy.css" />
{% endblock %} {% block content %}

<main class="article-content-container container pico-container">
    {% if not ARTICLE_HIDE_TRANSLATION %}
      {% import 'translations.html' as translations with context %}
      {{ translations.translations_for(article) }}
    {% endif %}
  <div class="article-hero cyberpunk-hero-glow">
    {% if article.image %}
    <div class="hero-image-container cyberpunk-image-glow">
      <img
        src="{{ SITEURL }}/{{ article.image }}"
        class="hero-background cyberpunk-hero-image"
        alt="Hero Background"
      />
      <div class="hero-overlay-gradient cyberpunk-glow-effect"></div>
    </div>
    {% endif %}
    <div class="hero-content cyberpunk-hero-content">
      <h1 class="hero-title cyberpunk-hero-title">{{ article.title }}</h1>
      <div class="hero-meta cyberpunk-hero-meta">
        <time class="published cyberpunk-published" datetime="{{ article.date.isoformat() }}">
          <i class="fa-solid fa-calendar-days"></i> {{ article.locale_date }}
        </time>
        {% if article.authors %}
        <address class="vcard author cyberpunk-author">
          <i class="fa-solid fa-user"></i>
          {% for author in article.authors %}
          <a class="url fn cyberpunk-author-link" href="{{ SITEURL }}/{{ author.url }}"
            >{{ author }}</a
          >
          {% endfor %}
        </address>
        {% endif %} {% if article.category %}
        <span class="category cyberpunk-category">
          <i class="fa-solid fa-folder-open"></i>
          <a href="{{ SITEURL }}/{{ article.category.url }}" class="cyberpunk-category-link"
            >{{ article.category }}</a
          >
        </span>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="article-ad-container">
    {% if GOOGLE_ADSENSE and PUBLISH %}
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6089943780218266"
      crossorigin="anonymous"
    ></script>
    <ins
      class="adsbygoogle"
      style="display: block; text-align: center"
      data-ad-layout="in-article"
      data-ad-format="fluid"
      data-ad-client="ca-pub-6089943780218266"
      data-ad-slot="4064563622"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    {% endif %}
  </div>
  <div class="article-content-grid">
    <article class="article-main-content">
      <!-- Series Navigation -->
      {% if article.series %}
      <div class="series-navigation-card pico-card">
        <div class="series-header">
          <h3><i class="fa-solid fa-bookmark"></i> Seri: {{ article.series.name }}</h3>
          <span class="series-progress">Bölüm {{ article.series.index }}/{{ article.series.all|length }}</span>
        </div>
        
        <div class="series-progress-bar">
          <div class="progress-fill" style="width: {{ (article.series.index / article.series.all|length * 100)|int }}%"></div>
        </div>
        
        <p class="series-description">Bu yazı "{{ article.series.name }}" serisinin {{ article.series.index }}. bölümüdür.</p>
        
        <!-- Series Index -->
        <details class="series-contents">
          <summary><i class="fa-solid fa-list"></i> Seri İçindekileri</summary>
          <ol class="series-list">
            {% for part_article in article.series.all %}
            <li {% if part_article == article %}class="active"{% endif %}>
              {% if part_article == article %}
              <span class="current-article">
                <i class="fa-solid fa-circle-check"></i> {{ part_article.title }}
              </span>
              {% else %}
              <a href="{{ SITEURL }}/{{ part_article.url }}">
                <i class="fa-solid fa-file-alt"></i> {{ part_article.title }}
              </a>
              {% endif %}
            </li>
            {% endfor %}
          </ol>
        </details>
      </div>
      {% endif %}
      
      <div class="article-content-wrapper pico-prose">
        {{ article.content }}
      </div>
      
      <div class="article-ad-section">
        {% if GOOGLE_ADSENSE and PUBLISH %}
        <script
          async
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6089943780218266"
          crossorigin="anonymous"
        ></script>
        <ins
          class="adsbygoogle"
          style="display: block"
          data-ad-format="autorelaxed"
          data-ad-client="ca-pub-6089943780218266"
          data-ad-slot="6307583586"
        ></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        {% endif %}
      </div>
      
      <!-- Related Posts and Support Section Side by Side -->
      <div class="article-bottom-section">
        {% if article.related_posts %}
        <div class="related-posts-section">
          <div class="related-posts-card pico-card">
            <hgroup>
              <h3><i class="fa-solid fa-star"></i> Benzer Yazılar</h3>
            </hgroup>
            <ul class="related-posts-list">
              {% for related_article in article.related_posts %}
              <li>
                <a href="{{ SITEURL }}/{{ related_article.url }}">
                  <i class="fa-solid fa-file-alt"></i> {{ related_article.title }}
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
        {% endif %}
        
        <div class="support-section">
          <div class="support-card pico-card">
            <hgroup>
              <h3><i class="fa-solid fa-heart"></i> Destek Olun</h3>
            </hgroup>
            <p>
              Bu içeriği faydalı bulduysanız, çalışmalarımı destekleyebilirsiniz.
            </p>
            <a href="{{ SITEURL }}/bagis/" role="button" class="primary">
              <i class="fa-solid fa-heart" aria-hidden="true"></i> Destek Ol
            </a>
          </div>
        </div>
      </div>
    </article>

    <aside class="article-sidebar">
    </aside>
  </div>
  <div class="article-ad-container">
    {% if GOOGLE_ADSENSE and PUBLISH %}
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6089943780218266"
      crossorigin="anonymous"
    ></script>
    <!-- YucelBaba-Yatay -->
    <ins
      class="adsbygoogle"
      style="display: block"
      data-ad-client="ca-pub-6089943780218266"
      data-ad-slot="7534662243"
      data-ad-format="auto"
      data-full-width-responsive="true"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    {% endif %}
  </div>

  {% if article.prev_article or article.next_article %}
  <nav class="article-nav-arrows" aria-label="Makale navigasyonu">
    {% if article.prev_article %}
    <a
      href="{{ SITEURL }}/{{ article.prev_article.url }}"
      class="article-nav-arrow secondary outline prev"
      aria-label="Önceki makale: {{ article.prev_article.title }}"
    >
      <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>
      <span>Önceki: {{ article.prev_article.title|truncate(50, True) }}</span>
    </a>
    {% endif %} {% if article.next_article %}
    <a
      href="{{ SITEURL }}/{{ article.next_article.url }}"
      class="article-nav-arrow secondary outline next"
      aria-label="Sonraki makale: {{ article.next_article.title }}"
    >
      <span>Sonraki: {{ article.next_article.title|truncate(50, True) }}</span>
      <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
    </a>
    {% endif %}
  </nav>
  {% endif %}
</main>

<!-- TOC Menüsü -->
{% if article.toc %}
<div id="toc-menu" class="toc-menu">
  <div class="toc-header">
    <h3>İçindekiler</h3>
    <button class="toc-close">&times;</button>
  </div>
  <div class="toc-content">
    {{ article.toc }}
  </div>
</div>
{% else %}
<!-- Debug: TOC is empty or not generated -->
<div style="display: none;" id="toc-debug">TOC is empty</div>
{% endif %}

<script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/copy.js" data-copy="Kopyala" data-copied="Kopyalandı!"></script>

{% endblock %}