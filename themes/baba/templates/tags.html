{% extends "base.html" %} {% block title %}Etiketler - {{ SITENAME }}{% endblock title %} {% block seo %}
<meta
    name="description"
    content="{{ SITENAME }} sitesinde kullanılan tüm etiketleri bulabilir ve konulara göre yazılara kolayca erişebilirsiniz." />
<link rel="canonical" href="{{ SITEURL }}/etiketler.html" />
<meta property="og:title" content="Etiketler - {{ SITENAME }}" />
<meta
    property="og:description"
    content="{{ SITENAME }} sitesinde kullanılan tüm etiketleri bulabilir ve konulara göre yazılara kolayca erişebilirsiniz." />
<meta property="og:type" content="website" />
<meta property="og:url" content="{{ SITEURL }}/etiketler.html" />
{% endblock seo %}
{% block content %}
    <div class="tags-hero text-center">
        <h1>Etiketler</h1>
        <p>
            Site içerisindeki tüm konulara ait etiketler. Büyüklük, içerik sayısını gösterir.
        </p>
    </div>

    {% set max_count = 1 %}
    {% for tag, articles in tags %}
        {% if articles|length > max_count %}
            {% set max_count = articles|length %}
        {% endif %}
    {% endfor %}
    {% set sorted_tags = [] %}
    {% for tag, articles in tags %}
        {% set _ = sorted_tags.append((tag, articles, articles|length)) %}
    {% endfor %}
    {% set sorted_tags = sorted_tags|sort(attribute=2, reverse=true) %}

    <div class="tags-cloud-container">
        {% for tag, articles, count in sorted_tags[:50] %}
            {% set tag_size = 1 %}
            {% if max_count > 1 %}
                {% set size_ratio = count / max_count %}
                {% if size_ratio < 0.2 %}
                    {% set tag_size = 1 %}
                {% elif size_ratio < 0.4 %}
                    {% set tag_size = 2 %}
                {% elif size_ratio < 0.6 %}
                    {% set tag_size = 3 %}
                {% elif size_ratio < 0.8 %}
                    {% set tag_size = 4 %}
                {% else %}
                    {% set tag_size = 5 %}
                {% endif %}
            {% endif %}

            <a
                href="{{ SITEURL }}/etiket/{{ tag.slug }}/"
                class="tags-item tag-size-{{ tag_size }} pico-tag"
                aria-label="{{ tag }} etiketli {{ count }} yazıya git">
                #{{ tag }}
                <span class="tags-count">{{ count }}</span>
            </a>
        {% endfor %}
    </div>


    <article class="tags-popular-card pico-card">
        <h2>En Çok Kullanılan Etiketler</h2>
        <div class="tags-grid">
            {% for tag, articles, count in sorted_tags[:5] %}
            <article class="tags-summary-card pico-card">
                <a href="{{ SITEURL }}/etiket/{{ tag.slug }}/" class="tags-summary-link">
                    <i class="fa-solid fa-tag" aria-hidden="true"></i>
                    <h3>#{{ tag }}</h3>
                    <span class="tags-summary-count">{{ count }} yazı</span>
                </a>
            </article>
            {% endfor %}
        </div>
    </article>
{% endblock content %}
