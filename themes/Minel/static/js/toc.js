"use strict";(()=>{const e=(e,t)=>{"function"==typeof window.debugLog&&window.debugLog(e,t)};e("TOC","TOC başlatılıyor...");const t=document.querySelector(".toc-container");if(!t)return void e("TOC","TOC container bulunamadı");const o=t.querySelectorAll("a.toc-href");if(e("TOC",`TOC linkleri: ${o.length}`),!o.length)return void e("TOC","TOC linkleri bulunamadı");o.forEach((t,o)=>{e("TOC",`Link ${o}: ${t.href} - ${t.textContent}`),t.insertAdjacentHTML("afterbegin",'\n    <svg viewBox="0 0 24 24" class="w-4 h-4 mr-2 inline-block text-primary">\n        <circle cx="4" cy="12" r="2" class="fill-primary/10 stroke-primary"/>\n        <line x1="6" y1="12" x2="18" y2="12" class="stroke-primary/30 stroke-1"/>\n    </svg>\n  ')});const n=Array.from(o).map(t=>{const o=t.getAttribute("href").slice(1),n=document.getElementById(o);return e("TOC",`Başlık ${o}: ${n?"bulundu":"bulunamadı"}`),{id:o,header:n,link:t}}).filter(e=>e.header);e("TOC",`Eşleşen başlık sayısı: ${n.length}`);const r=()=>{const o=window.scrollY+200;let r=null,l=null;for(const e of n){if(!(e.header.offsetTop<=o))break;l=r,r=e}r?(e("TOC",`Aktif başlık: ${r.id}`),n.forEach((e,i)=>{let{header:s,link:a}=e;if(s.offsetTop<o){a.classList.add("text-base-content/70");const e=n[i+1]?.header,t=e?Math.min(100,(o-s.offsetTop)/(e.offsetTop-s.offsetTop)*100):100,r=a.querySelector("circle");r&&r.setAttribute("stroke-dashoffset",Math.round(100-t))}else a.classList.remove("text-base-content/70");if(s===r.header){a.classList.add("text-primary","font-medium");const e=a.parentElement,o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=l&&l.header.offsetTop>r.header.offsetTop;if(n.top<o.top||n.bottom>o.bottom){const o=i?.7*t.clientHeight:.3*t.clientHeight;t.scrollTo({top:e.offsetTop-o,behavior:"smooth"})}}else a.classList.remove("text-primary","font-medium")})):e("TOC","Aktif başlık bulunamadı")};let l;window.addEventListener("scroll",()=>{l&&window.cancelAnimationFrame(l),l=requestAnimationFrame(()=>{e("TOC",`Scroll pozisyonu: ${window.scrollY}`),r()})},{passive:!0}),o.forEach(t=>{t.addEventListener("click",o=>{o.preventDefault();const n=t.getAttribute("href").slice(1),r=document.getElementById(n);r&&(e("TOC",`Tıklanan başlık: ${n}`),o.stopPropagation(),window.scrollTo({top:r.offsetTop-100,behavior:"smooth"}),history.pushState?history.pushState(null,null,`#${n}`):location.hash=`#${n}`)})}),e("TOC","TOC ilk güncelleme yapılıyor..."),r()})();