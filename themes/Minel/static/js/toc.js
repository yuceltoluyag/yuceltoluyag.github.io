"use strict";(()=>{const t=(t,e)=>{"function"==typeof window.debugLog&&window.debugLog(t,e)};t("TOC","TOC başlatılıyor...");const e=document.querySelector(".toc-container");if(!e)return void t("TOC","TOC container bulunamadı");const o=e.querySelectorAll("a.toc-href");if(t("TOC","TOC linkleri: ".concat(o.length)),!o.length)return void t("TOC","TOC linkleri bulunamadı");o.forEach((e,o)=>{t("TOC","Link ".concat(o,": ").concat(e.href," - ").concat(e.textContent)),e.insertAdjacentHTML("afterbegin",'\n    <svg viewBox="0 0 24 24" class="w-4 h-4 mr-2 inline-block text-primary">\n        <circle cx="4" cy="12" r="2" class="fill-primary/10 stroke-primary"/>\n        <line x1="6" y1="12" x2="18" y2="12" class="stroke-primary/30 stroke-1"/>\n    </svg>\n  ')});const n=Array.from(o).map(e=>{const o=e.getAttribute("href").slice(1),n=document.getElementById(o);return t("TOC","Başlık ".concat(o,": ").concat(n?"bulundu":"bulunamadı")),{id:o,header:n,link:e}}).filter(t=>t.header);t("TOC","Eşleşen başlık sayısı: ".concat(n.length));const a=()=>{const o=window.scrollY+200;let a=null,l=null;for(const t of n){if(!(t.header.offsetTop<=o))break;l=a,a=t}a?(t("TOC","Aktif başlık: ".concat(a.id)),n.forEach((t,r)=>{let{header:c,link:i}=t;if(c.offsetTop<o){var s;i.classList.add("text-base-content/70");const t=null===(s=n[r+1])||void 0===s?void 0:s.header,e=t?Math.min(100,(o-c.offsetTop)/(t.offsetTop-c.offsetTop)*100):100,a=i.querySelector("circle");a&&a.setAttribute("stroke-dashoffset",Math.round(100-e))}else i.classList.remove("text-base-content/70");if(c===a.header){i.classList.add("text-primary","font-medium");const t=i.parentElement,o=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=l&&l.header.offsetTop>a.header.offsetTop;if(n.top<o.top||n.bottom>o.bottom){const o=r?.7*e.clientHeight:.3*e.clientHeight;e.scrollTo({top:t.offsetTop-o,behavior:"smooth"})}}else i.classList.remove("text-primary","font-medium")})):t("TOC","Aktif başlık bulunamadı")};let l;window.addEventListener("scroll",()=>{l&&window.cancelAnimationFrame(l),l=requestAnimationFrame(()=>{t("TOC","Scroll pozisyonu: ".concat(window.scrollY)),a()})},{passive:!0}),o.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();const n=e.getAttribute("href").slice(1),a=document.getElementById(n);a&&(t("TOC","Tıklanan başlık: ".concat(n)),o.stopPropagation(),window.scrollTo({top:a.offsetTop-100,behavior:"smooth"}),history.pushState?history.pushState(null,null,"#".concat(n)):location.hash="#".concat(n))})}),t("TOC","TOC ilk güncelleme yapılıyor..."),a()})();