{"version":3,"sources":["toc.js"],"names":["_createForOfIteratorHelper","r","e","t","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","n","done","value","f","TypeError","o","a","u","call","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","window","debugLog","tocContainer","document","querySelector","tocLinks","querySelectorAll","concat","forEach","link","index","href","textContent","insertAdjacentHTML","headers","map","id","getAttribute","header","getElementById","filter","item","scrollTimeout","updateTOC","_step","scrollPos","scrollY","currentHeader","previousHeader","_iterator","offsetTop","err","_ref","_headers","classList","add","nextHeader","progress","Math","min","circle","setAttribute","round","remove","liElement","parentElement","tocRect","getBoundingClientRect","liRect","scrollingUp","top","bottom","offset","clientHeight","scrollTo","behavior","addEventListener","cancelAnimationFrame","requestAnimationFrame","passive","preventDefault","targetId","targetHeader","stopPropagation","history","pushState","location","hash"],"mappings":"AAAA,aAEA,SAASA,2BAA2BC,EAAGC,GAAK,IAAIC,EAAI,oBAAsBC,QAAUH,EAAEG,OAAOC,WAAaJ,EAAE,cAAe,IAAKE,EAAG,CAAE,GAAIG,MAAMC,QAAQN,KAAOE,EAAIK,4BAA4BP,KAAOC,GAAKD,GAAK,iBAAmBA,EAAEQ,OAAQ,CAAEN,IAAMF,EAAIE,GAAI,IAAIO,EAAK,EAAGC,EAAI,WAAc,EAAG,MAAO,CAAEC,EAAGD,EAAGE,EAAG,WAAe,OAAOH,GAAMT,EAAEQ,OAAS,CAAEK,MAAM,GAAO,CAAEA,MAAM,EAAIC,MAAOd,EAAES,KAAS,EAAGR,EAAG,SAAWD,GAAK,MAAMA,CAAG,EAAGe,EAAGL,EAAK,CAAE,MAAM,IAAIM,UAAU,wIAA0I,CAAE,IAAIC,EAAGC,GAAI,EAAIC,GAAI,EAAI,MAAO,CAAER,EAAG,WAAeT,EAAIA,EAAEkB,KAAKpB,EAAI,EAAGY,EAAG,WAAe,IAAIZ,EAAIE,EAAEmB,OAAQ,OAAOH,EAAIlB,EAAEa,KAAMb,CAAG,EAAGC,EAAG,SAAWD,GAAKmB,GAAI,EAAIF,EAAIjB,CAAG,EAAGe,EAAG,WAAe,IAAMG,GAAK,MAAQhB,EAAU,QAAKA,EAAU,QAAK,CAAE,QAAU,GAAIiB,EAAG,MAAMF,CAAG,CAAE,EAAK,CAC31B,SAASV,4BAA4BP,EAAGkB,GAAK,GAAIlB,EAAG,CAAE,GAAI,iBAAmBA,EAAG,OAAOsB,kBAAkBtB,EAAGkB,GAAI,IAAIhB,EAAI,CAAC,EAAEqB,SAASH,KAAKpB,GAAGwB,MAAM,GAAI,GAAI,MAAO,WAAatB,GAAKF,EAAEyB,cAAgBvB,EAAIF,EAAEyB,YAAYC,MAAO,QAAUxB,GAAK,QAAUA,EAAIG,MAAMsB,KAAK3B,GAAK,cAAgBE,GAAK,2CAA2C0B,KAAK1B,GAAKoB,kBAAkBtB,EAAGkB,QAAK,CAAQ,CAAE,CACzX,SAASI,kBAAkBtB,EAAGkB,IAAM,MAAQA,GAAKA,EAAIlB,EAAEQ,UAAYU,EAAIlB,EAAEQ,QAAS,IAAK,IAAIP,EAAI,EAAGW,EAAIP,MAAMa,GAAIjB,EAAIiB,EAAGjB,IAAKW,EAAEX,GAAKD,EAAEC,GAAI,OAAOW,CAAG,EAHnJ,WACEiB,OAAOC,SAAS,MAAO,uBAEvB,IAAMC,EAAeC,SAASC,cAAc,kBAC5C,GAAKF,EAAL,CAKA,IAAMG,EAAWH,EAAaI,iBAAiB,cAE/C,GADAN,OAAOC,SAAS,MAAK,iBAAAM,OAAmBF,EAAS1B,SAC5C0B,EAAS1B,OAAd,CAcA0B,EAASG,SAAQ,SAACC,EAAMC,GACtBV,OAAOC,SAAS,MAAK,QAAAM,OAAUG,EAAK,MAAAH,OAAKE,EAAKE,KAAI,OAAAJ,OAAME,EAAKG,cAC7DH,EAAKI,mBAAmB,aAVT,4LAWjB,IAGA,IAAMC,EAAUtC,MAAMsB,KAAKO,GAAUU,KAAI,SAAAN,GACvC,IAAMO,EAAKP,EAAKQ,aAAa,QAAQtB,MAAM,GACrCuB,EAASf,SAASgB,eAAeH,GAEvC,OADAhB,OAAOC,SAAS,MAAK,UAAAM,OAAYS,EAAE,MAAAT,OAAKW,EAAS,UAAY,eACtD,CAAEF,GAAAA,EAAIE,OAAAA,EAAQT,KAAAA,EACvB,IAAGW,QAAO,SAAAC,GAAI,OAAIA,EAAKH,MAAM,IAE7BlB,OAAOC,SAAS,MAAK,0BAAAM,OAA4BO,EAAQnC,SAGzD,IAsEI2C,EAtEEC,EAAY,WAChB,IAK0BC,EALpBC,EAAYzB,OAAO0B,QAAU,IAC/BC,EAAgB,KAChBC,EAAiB,KAAKC,EAAA3D,2BAGP4C,GAAO,IAA1B,IAAAe,EAAA/C,MAAA0C,EAAAK,EAAA9C,KAAAC,MAA4B,CAAA,IAAjBqC,EAAIG,EAAAvC,MACb,KAAIoC,EAAKH,OAAOY,WAAaL,GAI3B,MAHAG,EAAiBD,EACjBA,EAAgBN,CAIpB,CAAC,CAAA,MAAAU,GAAAF,EAAAzD,EAAA2D,EAAA,CAAA,QAAAF,EAAA3C,GAAA,CAEGyC,GACF3B,OAAOC,SAAS,MAAK,iBAAAM,OAAmBoB,EAAcX,KAGtDF,EAAQN,SAAQ,SAAAwB,EAAmBtB,GAAU,IAA1BQ,EAAMc,EAANd,OAAQT,EAAIuB,EAAJvB,KAEzB,GAAIS,EAAOY,UAAYL,EAAW,CAAA,IAAAQ,EAChCxB,EAAKyB,UAAUC,IAAI,oBAGnB,IAAMC,EAA+B,QAArBH,EAAGnB,EAAQJ,EAAQ,UAAE,IAAAuB,OAAA,EAAlBA,EAAoBf,OACjCmB,EAAWD,EACbE,KAAKC,IAAI,KAAOd,EAAYP,EAAOY,YAAcM,EAAWN,UAAYZ,EAAOY,WAAc,KAC7F,IAEEU,EAAS/B,EAAKL,cAAc,UAC9BoC,GACFA,EAAOC,aAAa,oBAAqBH,KAAKI,MAAM,IAAML,GAE9D,MACE5B,EAAKyB,UAAUS,OAAO,oBAIxB,GAAIzB,IAAWS,EAAcT,OAAQ,CACnCT,EAAKyB,UAAUC,IAAI,eAGnB,IAAMS,EAAYnC,EAAKoC,cACjBC,EAAU5C,EAAa6C,wBACvBC,EAASJ,EAAUG,wBAGnBE,EAAcrB,GAAkBA,EAAeV,OAAOY,UAAYH,EAAcT,OAAOY,UAE7F,GAAIkB,EAAOE,IAAMJ,EAAQI,KAAOF,EAAOG,OAASL,EAAQK,OAAQ,CAC9D,IAAMC,EAASH,EACe,GAA5B/C,EAAamD,aACe,GAA5BnD,EAAamD,aAEfnD,EAAaoD,SAAS,CACpBJ,IAAKN,EAAUd,UAAYsB,EAC3BG,SAAU,UAEd,CACF,MACE9C,EAAKyB,UAAUS,OAAO,cAE1B,KAEA3C,OAAOC,SAAS,MAAO,0BAE3B,EAIAD,OAAOwD,iBAAiB,UAAU,WAC5BlC,GACFtB,OAAOyD,qBAAqBnC,GAE9BA,EAAgBoC,uBAAsB,WACpC1D,OAAOC,SAAS,MAAK,qBAAAM,OAAuBP,OAAO0B,UACnDH,GACF,GACF,GAAG,CAAEoC,SAAS,IAGdtD,EAASG,SAAQ,SAAAC,GACfA,EAAK+C,iBAAiB,SAAS,SAACpF,GAC9BA,EAAEwF,iBACF,IAAMC,EAAWpD,EAAKQ,aAAa,QAAQtB,MAAM,GAC3CmE,EAAe3D,SAASgB,eAAe0C,GAEzCC,IACF9D,OAAOC,SAAS,MAAK,oBAAAM,OAAsBsD,IAG3CzF,EAAE2F,kBAGF/D,OAAOsD,SAAS,CACdJ,IAAKY,EAAahC,UAAY,IAC9ByB,SAAU,WAIRS,QAAQC,UACVD,QAAQC,UAAU,KAAM,KAAI,IAAA1D,OAAMsD,IAElCK,SAASC,KAAI,IAAA5D,OAAOsD,GAG1B,GACF,IAGA7D,OAAOC,SAAS,MAAO,mCACvBsB,GA3IA,MAFEvB,OAAOC,SAAS,MAAO,0BALzB,MAFED,OAAOC,SAAS,MAAO,2BAqJ1B,CA1JD","file":"toc.min.js","sourcesContent":["// TOC başlatma\n(() => {\n  window.debugLog('TOC', 'TOC başlatılıyor...');\n\n  const tocContainer = document.querySelector('.toc-container');\n  if (!tocContainer) {\n    window.debugLog('TOC', 'TOC container bulunamadı');\n    return;\n  }\n\n  const tocLinks = tocContainer.querySelectorAll('a.toc-href');\n  window.debugLog('TOC', `TOC linkleri: ${tocLinks.length}`);\n  if (!tocLinks.length) {\n    window.debugLog('TOC', 'TOC linkleri bulunamadı');\n    return;\n  }\n\n  // SVG template - Minimal tasarım\n  const svgTemplate = `\n    <svg viewBox=\"0 0 24 24\" class=\"toc-icon\">\n        <circle cx=\"4\" cy=\"12\" r=\"2\" class=\"toc-dot\"/>\n        <line x1=\"6\" y1=\"12\" x2=\"18\" y2=\"12\" class=\"toc-line\"/>\n    </svg>\n  `;\n\n  // Her linke SVG ekle\n  tocLinks.forEach((link, index) => {\n    window.debugLog('TOC', `Link ${index}: ${link.href} - ${link.textContent}`);\n    link.insertAdjacentHTML('afterbegin', svgTemplate);\n  });\n\n  // Başlıkları ve pozisyonlarını al\n  const headers = Array.from(tocLinks).map(link => {\n    const id = link.getAttribute('href').slice(1);\n    const header = document.getElementById(id);\n    window.debugLog('TOC', `Başlık ${id}: ${header ? 'bulundu' : 'bulunamadı'}`);\n    return { id, header, link };\n  }).filter(item => item.header);\n\n  window.debugLog('TOC', `Eşleşen başlık sayısı: ${headers.length}`);\n\n  // TOC durumunu güncelle\n  const updateTOC = () => {\n    const scrollPos = window.scrollY + 200;\n    let currentHeader = null;\n    let previousHeader = null;\n\n    // Aktif ve önceki başlığı bul\n    for (const item of headers) {\n      if (item.header.offsetTop <= scrollPos) {\n        previousHeader = currentHeader;\n        currentHeader = item;\n      } else {\n        break;\n      }\n    }\n\n    if (currentHeader) {\n      window.debugLog('TOC', `Aktif başlık: ${currentHeader.id}`);\n\n      // TOC öğelerini güncelle\n      headers.forEach(({ header, link }, index) => {\n        // Önceki başlıkları işaretle\n        if (header.offsetTop < scrollPos) {\n          link.classList.add('toc-already-read');\n\n          // Progress hesapla\n          const nextHeader = headers[index + 1]?.header;\n          const progress = nextHeader\n            ? Math.min(100, ((scrollPos - header.offsetTop) / (nextHeader.offsetTop - header.offsetTop)) * 100)\n            : 100;\n\n          const circle = link.querySelector('circle');\n          if (circle) {\n            circle.setAttribute('stroke-dashoffset', Math.round(100 - progress));\n          }\n        } else {\n          link.classList.remove('toc-already-read');\n        }\n\n        // Aktif başlığı işaretle\n        if (header === currentHeader.header) {\n          link.classList.add('toc-reading');\n\n          // TOC'u aktif öğeye scroll et\n          const liElement = link.parentElement;\n          const tocRect = tocContainer.getBoundingClientRect();\n          const liRect = liElement.getBoundingClientRect();\n\n          // Scroll yönünü belirle\n          const scrollingUp = previousHeader && previousHeader.header.offsetTop > currentHeader.header.offsetTop;\n\n          if (liRect.top < tocRect.top || liRect.bottom > tocRect.bottom) {\n            const offset = scrollingUp ?\n              tocContainer.clientHeight * 0.7 : // Yukarı scroll için offset\n              tocContainer.clientHeight * 0.3;  // Aşağı scroll için offset\n\n            tocContainer.scrollTo({\n              top: liElement.offsetTop - offset,\n              behavior: 'smooth'\n            });\n          }\n        } else {\n          link.classList.remove('toc-reading');\n        }\n      });\n    } else {\n      window.debugLog('TOC', 'Aktif başlık bulunamadı');\n    }\n  };\n\n  // Scroll event listener\n  let scrollTimeout;\n  window.addEventListener('scroll', () => {\n    if (scrollTimeout) {\n      window.cancelAnimationFrame(scrollTimeout);\n    }\n    scrollTimeout = requestAnimationFrame(() => {\n      window.debugLog('TOC', `Scroll pozisyonu: ${window.scrollY}`);\n      updateTOC();\n    });\n  }, { passive: true });\n\n  // TOC link tıklama\n  tocLinks.forEach(link => {\n    link.addEventListener('click', (e) => {\n      e.preventDefault();\n      const targetId = link.getAttribute('href').slice(1);\n      const targetHeader = document.getElementById(targetId);\n\n      if (targetHeader) {\n        window.debugLog('TOC', `Tıklanan başlık: ${targetId}`);\n\n        // Sayfa geçiş animasyonunu engelle\n        e.stopPropagation();\n\n        // Smooth scroll\n        window.scrollTo({\n          top: targetHeader.offsetTop - 100,\n          behavior: 'smooth'\n        });\n\n        // URL'i güncelle ama sayfayı yenileme\n        if (history.pushState) {\n          history.pushState(null, null, `#${targetId}`);\n        } else {\n          location.hash = `#${targetId}`;\n        }\n      }\n    });\n  });\n\n  // İlk yüklemede güncelle\n  window.debugLog('TOC', 'TOC ilk güncelleme yapılıyor...');\n  updateTOC();\n})();"]}