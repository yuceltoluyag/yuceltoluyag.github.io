function t(){document.querySelectorAll(".article-content h2, .article-content h3, .article-content h4").forEach(((t,e)=>{if(!t.id){const o=t.textContent.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");t.id=`heading-${o}-${e}`}t.classList.add("scroll-target")}))}function e(){const t=document.querySelector(".toc-content");if(!t)return;const e=document.createElement("div");e.className="toc-marker",t.appendChild(e)}function o(){document.querySelectorAll(".toc-list-item a").forEach((t=>{t.classList.remove("toc-link"),t.classList.add("toc-href");const e=l();t.insertBefore(e,t.firstChild)}))}function c(){const t=Array.from(document.querySelectorAll(".article-content h2, .article-content h3, .article-content h4"));if(0===t.length)return;const e=window.scrollY+150;let o=null;for(let c=0;c<t.length;c++){const n=t[c],r=t[c+1],l=n.offsetTop,s=r?r.offsetTop:document.body.scrollHeight;if(e>=l&&e<s){o=n;break}}if(!o&&t.length>0){for(const c of t)if(c.offsetTop>e){o=c;break}o||(o=t[t.length-1])}n(o)}function n(t){if(!t)return;const e=document.querySelectorAll(".toc-href"),o=document.querySelector(".toc-marker");e.forEach((t=>{t.classList.remove("toc-reading")}));const c=document.querySelector(`.toc-href[href="#${t.id}"]`);if(c&&(c.classList.add("toc-reading"),r(c),o)){const t=c.offsetTop;o.style.transform=`translateY(${t}px)`}}function r(t){const e=Array.from(document.querySelectorAll(".toc-href")),o=e.indexOf(t);e.forEach(((t,e)=>{e<o?t.classList.add("toc-already-read"):t.classList.remove("toc-already-read")}))}function l(){const t=document.createElement("span");return t.className="toc-icon",t.innerHTML='\n        <svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg">\n            <line x1="0" y1="12" x2="8" y2="12" class="toc-line"></line>\n            <circle cx="14" cy="12" r="4" class="toc-dot"></circle>\n        </svg>\n    ',t}function s(t,e){let o;return function(){const c=this,n=arguments;clearTimeout(o),o=setTimeout((()=>{t.apply(c,n)}),e)}}document.addEventListener("DOMContentLoaded",(function(){if(!document.querySelector(".toc-container"))return;0!==document.querySelectorAll(".toc-list-item").length&&(t(),e(),o(),window.addEventListener("scroll",s(c,100)),c())}));