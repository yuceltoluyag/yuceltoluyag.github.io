"use strict";let searchData=[],searchIndex=null;const searchModal=document.getElementById("search-modal"),searchForm=document.getElementById("search-form"),searchInput=document.getElementById("search-input"),searchResults=document.getElementById("search-results"),searchTriggers=document.querySelectorAll(".search-trigger"),searchModalClose=document.querySelector(".btn-circle[aria-label='Aramayı kapat']");async function loadSearchData(){try{const e=await fetch("/search.json");if(!e.ok)throw new Error("Arama verileri yüklenemedi");searchData=await e.json(),initSearchIndex()}catch(e){console.error("Arama verileri yükleme hatası:",e)}}function initSearchIndex(){searchData.forEach((e=>{e._searchTitle=e.title?.toLowerCase()||"",e._searchCategory=e.category?.toLowerCase()||"",e._searchTags=e.tags?.join(" ").toLowerCase()||""}))}function openSearchModal(){console.log("Modalı açma girişimi"),searchModal?(console.log("Modal açılıyor:",searchModal),searchModal.showModal(),setTimeout((()=>{searchInput&&searchInput.focus()}),100)):console.error("Search modal bulunamadı!")}function closeSearchModal(){console.log("Modalı kapatma girişimi"),searchModal?(console.log("Modal kapatılıyor"),searchModal.close(),searchInput&&(searchInput.value=""),searchResults&&(searchResults.innerHTML="")):console.error("Search modal bulunamadı!")}console.log("Search.js yükleniyor"),console.log("Search modal element:",searchModal),console.log("Search triggers:",searchTriggers.length),console.log("Search modal close button:",searchModalClose);let searchTimeout=null;function performSearch(e){if(!e.trim())return void(searchResults.innerHTML='<p class="text-center text-base-content/60 py-8">Arama sorgusu giriniz</p>');const a=e.toLowerCase();displayResults(searchData.filter((e=>e._searchTitle.includes(a)||e._searchCategory.includes(a)||e._searchTags.includes(a))),e)}function displayResults(e,a){if(searchResults.innerHTML="",0===e.length)return void(searchResults.innerHTML=`<p class="text-center text-base-content/60 py-8">"${a}" için sonuç bulunamadı</p>`);const t=document.createDocumentFragment(),r=document.createElement("div");r.className="space-y-4",e.forEach((e=>{const t=document.createElement("article");t.className="card bg-base-200 hover:shadow-md transition-all duration-200";const n=new Date(e.date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),s=window.location.origin;let o=e.url;o.startsWith("/")||(o="/"+o);const c=s+o;t.innerHTML=`\n            <div class="card-body p-4">\n                <h3 class="font-bold text-lg mb-1">\n                    <a href="${c}" class="hover:text-primary transition-colors">${highlightText(e.title,a)}</a>\n                </h3>\n                <div class="flex flex-wrap gap-2 text-sm text-base-content/70 mb-2">\n                    <span class="flex items-center gap-1">\n                        <span class="iconify" data-icon="tabler:calendar" width="16" height="16"></span>\n                        ${n}\n                    </span>\n                    ${e.category?`<span class="flex items-center gap-1">\n                        <span class="iconify" data-icon="tabler:folder" width="16" height="16"></span>\n                        ${e.category}\n                    </span>`:""}\n                </div>\n                ${e.tags&&e.tags.length>0?`<div class="flex flex-wrap gap-1 mt-2">\n                        ${e.tags.map((e=>`<span class="badge badge-sm badge-outline">${e}</span>`)).join("")}\n                    </div>`:""}\n            </div>\n        `,r.appendChild(t)})),t.appendChild(r),searchResults.appendChild(t)}function highlightText(e,a){if(!e)return"";const t=new RegExp(`(${escapeRegExp(a)})`,"gi");return e.replace(t,"<mark class='bg-primary/20 text-primary px-1 rounded-xs'>$1</mark>")}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}document.addEventListener("DOMContentLoaded",(()=>{console.log("Search DOM yüklendi"),console.log("Search modal (DOMContentLoaded içinde):",document.getElementById("search-modal")),console.log("Search triggers (DOMContentLoaded içinde):",document.querySelectorAll(".search-trigger").length),loadSearchData(),searchTriggers.forEach((e=>{e.addEventListener("click",(e=>{console.log("Arama tetiği tıklandı"),e.preventDefault(),openSearchModal()}))})),searchForm&&searchForm.addEventListener("submit",(e=>{console.log("Form gönderildi"),e.preventDefault(),performSearch(searchInput.value)})),searchInput&&searchInput.addEventListener("input",(e=>{clearTimeout(searchTimeout),searchTimeout=setTimeout((()=>{performSearch(e.target.value)}),200)}))}));