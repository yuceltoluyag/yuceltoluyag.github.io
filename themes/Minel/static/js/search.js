"use strict";let searchData=[],searchIndex=null;const searchModal=document.getElementById("search-modal"),searchForm=document.getElementById("search-form"),searchInput=document.getElementById("search-input"),searchResults=document.getElementById("search-results"),searchTriggers=document.querySelectorAll(".search-trigger"),searchModalClose=document.querySelector(".btn-circle[aria-label='Aramayı kapat']"),isDebugMode="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("192.168."),debugLog=window.debugLog||function(e){if(isDebugMode){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];console.log(e,...t)}};async function loadSearchData(){try{const e=await fetch("/search.json");if(!e.ok)throw new Error("Arama verileri yüklenemedi");searchData=await e.json(),initSearchIndex()}catch(e){debugLog("Arama verileri yükleme hatası:",e)}}function initSearchIndex(){searchData.forEach(e=>{var a,t,n;e._searchTitle=(null===(a=e.title)||void 0===a?void 0:a.toLowerCase())||"",e._searchCategory=(null===(t=e.category)||void 0===t?void 0:t.toLowerCase())||"",e._searchTags=(null===(n=e.tags)||void 0===n?void 0:n.join(" ").toLowerCase())||""})}function openSearchModal(){debugLog("Modalı açma girişimi"),searchModal?(debugLog("Modal açılıyor:",searchModal),searchModal.showModal(),setTimeout(()=>{searchInput&&searchInput.focus()},100)):isDebugMode&&console.error("Search modal bulunamadı!")}function closeSearchModal(){debugLog("Modalı kapatma girişimi"),searchModal?(debugLog("Modal kapatılıyor"),searchModal.close(),searchInput&&(searchInput.value=""),searchResults&&(searchResults.innerHTML="")):isDebugMode&&console.error("Search modal bulunamadı!")}debugLog("Search.js yükleniyor"),debugLog("Search modal element:",searchModal),debugLog("Search triggers:",searchTriggers.length),debugLog("Search modal close button:",searchModalClose);let searchTimeout=null;function performSearch(e){if(!e.trim())return void(searchResults.innerHTML='<p class="text-center text-base-content/60 py-8">Arama sorgusu giriniz</p>');const a=e.toLowerCase();displayResults(searchData.filter(e=>e._searchTitle.includes(a)||e._searchCategory.includes(a)||e._searchTags.includes(a)),e)}function displayResults(e,a){if(searchResults.innerHTML="",0===e.length)return void(searchResults.innerHTML='<p class="text-center text-base-content/60 py-8">"'.concat(a,'" için sonuç bulunamadı</p>'));const t=document.createDocumentFragment(),n=document.createElement("div");n.className="space-y-4",e.forEach(e=>{const t=document.createElement("article");t.className="card bg-base-200 hover:shadow-md transition-all duration-200";const r=new Date(e.date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),o=window.location.origin;let c=e.url;c.startsWith("/")||(c="/"+c);const s=o+c;t.innerHTML='\n            <div class="card-body p-4">\n                <h3 class="font-bold text-xl mb-1">\n                    <a href="'.concat(s,'" class="hover:text-primary transition-colors result-link">').concat(highlightText(e.title,a),'</a>\n                </h3>\n                <div class="flex flex-wrap gap-2 text-sm text-base-content/70 mb-2">\n                    <span class="flex items-center gap-1">\n                        <span class="iconify" data-icon="tabler:calendar" width="16" height="16"></span>\n                        ').concat(r,"\n                    </span>\n                    ").concat(e.category?'<span class="flex items-center gap-1">\n                        <span class="iconify" data-icon="tabler:folder" width="16" height="16"></span>\n                        '.concat(e.category,"\n                    </span>"):"","\n                </div>\n                ").concat(e.tags&&e.tags.length>0?'<div class="flex flex-wrap gap-1 mt-2">\n                        '.concat(e.tags.map(e=>'<span class="badge badge-sm badge-outline">'.concat(e,"</span>")).join(""),"\n                    </div>"):"","\n            </div>\n        "),n.appendChild(t)}),t.appendChild(n),searchResults.appendChild(t),addResultLinksEventListeners()}function addResultLinksEventListeners(){document.querySelectorAll(".result-link").forEach(e=>{e.addEventListener("click",e=>{closeSearchModal()})})}function highlightText(e,a){if(!e)return"";const t=new RegExp("(".concat(escapeRegExp(a),")"),"gi");return e.replace(t,"<mark class='bg-primary/20 text-primary px-1 rounded-xs'>$1</mark>")}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}document.addEventListener("DOMContentLoaded",()=>{debugLog("Search DOM yüklendi"),debugLog("Search modal (DOMContentLoaded içinde):",document.getElementById("search-modal")),debugLog("Search triggers (DOMContentLoaded içinde):",document.querySelectorAll(".search-trigger").length),loadSearchData(),searchTriggers.forEach(e=>{e.addEventListener("click",e=>{debugLog("Arama tetiği tıklandı"),e.preventDefault(),openSearchModal()})}),searchForm&&searchForm.addEventListener("submit",e=>{debugLog("Form gönderildi"),e.preventDefault(),performSearch(searchInput.value)}),searchInput&&searchInput.addEventListener("input",e=>{clearTimeout(searchTimeout),searchTimeout=setTimeout(()=>{performSearch(e.target.value)},200)})});