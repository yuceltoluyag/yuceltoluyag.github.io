let e=[],t=null;const n=document.getElementById("search-modal"),a=document.getElementById("search-form"),s=document.getElementById("search-input"),r=document.getElementById("search-results"),c=document.querySelectorAll(".search-trigger"),o=document.querySelector(".search-modal-close");async function i(){try{const t=await fetch("/search.json");if(!t.ok)throw new Error("Arama verileri yüklenemedi");e=await t.json(),l()}catch(e){}}function l(){e.forEach((e=>{e._searchTitle=e.title?.toLowerCase()||"",e._searchCategory=e.category?.toLowerCase()||"",e._searchTags=e.tags?.join(" ").toLowerCase()||""}))}function u(){n.classList.add("show"),document.body.classList.add("search-modal-open"),setTimeout((()=>{s.focus()}),100)}function d(){n.classList.remove("show"),document.body.classList.remove("search-modal-open"),s.value="",r.innerHTML=""}function m(e){e.target===n&&d()}let h=null;function g(t){if(!t.trim())return void(r.innerHTML='<p class="search-no-results">Arama sorgusu giriniz</p>');const n=t.toLowerCase();p(e.filter((e=>e._searchTitle.includes(n)||e._searchCategory.includes(n)||e._searchTags.includes(n))),t)}function p(e,t){if(r.innerHTML="",0===e.length)return void(r.innerHTML=`<p class="search-no-results">"${t}" için sonuç bulunamadı</p>`);const n=document.createDocumentFragment(),a=document.createElement("div");a.className="search-results-container",e.forEach((e=>{const n=document.createElement("article");n.className="search-result-item";const s=new Date(e.date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),r=window.location.origin;let c=e.url;c.startsWith("/")||(c="/"+c);const o=r+c;n.innerHTML=`\n            <h3 class="search-result-title">\n                <a href="${o}" class="search-result-link">${f(e.title,t)}</a>\n            </h3>\n            <div class="search-result-meta">\n                <span class="search-result-date">${s}</span>\n                ${e.category?`<span class="search-result-category">${e.category}</span>`:""}\n            </div>\n            ${e.tags&&e.tags.length>0?`<div class="search-result-tags">\n                    ${e.tags.map((e=>`<span class="search-result-tag">${e}</span>`)).join("")}\n                </div>`:""}\n        `,a.appendChild(n)})),n.appendChild(a),r.appendChild(n)}function f(e,t){if(!e)return"";const n=new RegExp(`(${L(t)})`,"gi");return e.replace(n,"<mark>$1</mark>")}function L(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}document.addEventListener("DOMContentLoaded",(()=>{i(),c.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),u()}))})),o&&o.addEventListener("click",d),n.addEventListener("click",m),a.addEventListener("submit",(e=>{e.preventDefault(),g(s.value)})),s.addEventListener("input",(e=>{clearTimeout(h),h=setTimeout((()=>{g(e.target.value)}),200)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&n.classList.contains("show")&&d()}))}));