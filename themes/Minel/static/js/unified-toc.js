"use strict";document.addEventListener("DOMContentLoaded",(function(){if(!document.querySelector(".toc-container"))return void console.log("TOC container bulunamadı");const e=document.querySelector(".toc-content");if(!e)return void console.log("TOC content bulunamadı");const t=document.getElementById("toc");if(!t)return void console.log("TOC div bulunamadı");console.log("TOC başlatılıyor...");let o,n=0,r="down",c=!1,l=null;function i(e){e.preventDefault();const t=this.getAttribute("href").slice(1),o=document.getElementById(t);if(o){e.stopPropagation(),c=!0,window.scrollTo({top:o.offsetTop-100,behavior:"smooth"}),history.pushState?history.pushState(null,null,`#${t}`):location.hash=`#${t}`;document.querySelectorAll(".toc-href").forEach((e=>e.classList.remove("text-primary","font-medium"))),this.classList.add("text-primary","font-medium"),setTimeout((()=>{c=!1}),1e3)}}function s(){if(c)return;const e=window.scrollY+150,t=Array.from(document.querySelectorAll(".prose h2, .prose h3, .prose h4"));if(0===t.length)return;let o=null,n=null;for(let r=0;r<t.length;r++){const c=t[r],l=t[r+1],i=c.offsetTop,s=l?l.offsetTop:document.body.scrollHeight;if(e>=i&&e<s){n=o,o=c;break}}if(!o&&t.length>0){for(const n of t)if(n.offsetTop>e){o=n;break}o||(o=t[t.length-1])}a(o,n,e)}function a(t,o,n){if(!t)return;const l=document.querySelectorAll(".toc-href");l.forEach((e=>{e.classList.remove("text-primary","font-medium","active")}));const i=document.querySelector(`.toc-href[href="#${t.id}"]`);i&&(i.classList.add("text-primary","font-medium","active"),function(e,t){const o=Array.from(t),n=o.indexOf(e);o.forEach(((e,t)=>{t<n?e.classList.add("text-base-content/50"):t===n?e.classList.add("text-base-content/90"):e.classList.remove("text-base-content/50","text-base-content/90")}))}(i,l),c||function(t){if(c)return;const o=t.closest("li");if(!o)return;const n=e.getBoundingClientRect(),l=t.getBoundingClientRect(),i=l.top-n.top+e.scrollTop,s=i+l.height,a=e.scrollTop,u=a+e.clientHeight;if(i<a||s>u){let t;t="down"===r?i-.2*e.clientHeight:i-.8*e.clientHeight,t=Math.max(0,Math.min(t,e.scrollHeight-e.clientHeight)),e.scrollTo({top:t,behavior:"smooth"})}}(i))}e.style.overflow="auto",e.style.maxHeight="250px",function(){const e=document.querySelectorAll(".prose h2, .prose h3, .prose h4");console.log("Bulunan başlık sayısı:",e.length),e.forEach(((e,t)=>{if(!e.id){const o=e.textContent.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");e.id=`heading-${o}-${t}`}e.classList.add("scroll-mt-24"),function(e){if(!("IntersectionObserver"in window))return;l||(l=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target.id,o=document.querySelector(`.toc-href[href="#${t}"]`);o&&!c&&(document.querySelectorAll(".toc-href").forEach((e=>{e.classList.remove("active","text-primary","font-medium")})),o.classList.add("active","text-primary","font-medium"),a(e.target,null,window.scrollY))}}))}),{rootMargin:"-80px 0px -70% 0px",threshold:[0,.1,.2,.5]}));l.observe(e)}(e)}))}(),function(){const t=e.querySelector(".toc-marker");t&&t.remove()}(),function(){const e=t.querySelectorAll("a");if(0===e.length)return void console.log("TOC linkleri bulunamadı");console.log("TOC linkleri bulundu:",e.length),e.forEach((e=>{e.classList.remove("toc-link"),e.classList.add("toc-href","text-base-content/70","hover:text-primary","transition-colors","relative"),e.addEventListener("click",i)})),function(){const e=t.querySelectorAll("a.toc-href");Array.from(e).map((e=>{const t=e.getAttribute("href").slice(1);return{id:t,header:document.getElementById(t),link:e}})).filter((e=>e.header))}()}(),window.addEventListener("scroll",(function(){const e=window.scrollY;r=e>n?"down":"up",n=e,o&&window.cancelAnimationFrame(o),o=requestAnimationFrame((()=>{c||s()}))}),{passive:!0}),e.addEventListener("scroll",(function(){c=!0,clearTimeout(e.scrollTimeout),e.scrollTimeout=setTimeout((()=>{c=!1}),1e3)}),{passive:!0}),setTimeout((()=>{s()}),100)}));