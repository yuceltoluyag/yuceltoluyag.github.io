{% extends "base.html" %} {% import '_includes/translations.html' as translations with context %} {% block title %}{{
article.title }}{% endblock %} {% block seo %}
<!-- Makale içeriğinden ilk resmi Open Graph için çıkar -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Makale içeriğini al
        const articleContent = document.querySelector(".post-content");
        if (articleContent) {
            // İlk resmi bul
            const firstImage = articleContent.querySelector("img");
            if (firstImage) {
                // Resim URL'sini al
                let imgSrc = firstImage.getAttribute("src");

                // Tam URL oluştur
                if (imgSrc && !imgSrc.startsWith("http")) {
                    // Göreceli URL ise mutlak URL'ye çevir
                    const siteUrl = document.querySelector('meta[name="siteurl"]').getAttribute("content");
                    imgSrc = imgSrc.startsWith("/") ? `${siteUrl}${imgSrc}` : `${siteUrl}/${imgSrc}`;
                }

                // Meta etiketini oluştur
                if (imgSrc) {
                    // Varsa mevcut og:image etiketini bul
                    let ogImage = document.querySelector('meta[property="og:image"]');

                    // Yoksa yeni oluştur
                    if (!ogImage) {
                        ogImage = document.createElement("meta");
                        ogImage.setAttribute("property", "og:image");
                        document.head.appendChild(ogImage);
                    }

                    // Değeri ayarla
                    ogImage.setAttribute("content", imgSrc);
                }
            }
        }
    });
</script>
{% endblock %} {% block sidebar %} {% include 'partials/sidebar.html' %} {% if article.toc %}
<!-- Mobil ve tablet görünümü için sabit butonlar -->
<div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3 lg:hidden">
    <!-- İçindekiler butonu -->
    <button
        onclick="toggleTOC()"
        aria-label="İçindekiler menüsünü aç"
        class="flex items-center justify-center w-12 h-12 rounded-full bg-site-card border border-border-card shadow-lg text-text-secondary hover:text-primary transition-all duration-300 hover:scale-110">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
        </svg>
    </button>

    <!-- Yukarı git butonu -->
    <button
        onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
        aria-label="Sayfanın başına git"
        class="flex items-center justify-center w-14 h-14 rounded-full bg-primary-dark border border-primary-dark/30 shadow-lg text-white hover:bg-primary-darker transition-all duration-300 hover:scale-110">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>
</div>

<!-- Mobil ve tablet için İçindekiler Kartı -->
<div id="tocModal" class="fixed bottom-28 right-8 z-40 w-64 hidden lg:hidden">
    <div class="bg-site-card rounded-lg shadow-xl border border-border-card overflow-hidden">
        <div class="p-4">
            <div class="flex items-center justify-between mb-2">
                <h3 class="text-sm font-bold text-text-primary">İçindekiler</h3>
                <button
                    onclick="toggleTOC()"
                    aria-label="İçindekiler menüsünü kapat"
                    class="text-text-secondary hover:text-primary">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <nav class="toc max-h-[50vh] overflow-y-auto text-sm">
                <div class="toc-container">{{ article.toc }}</div>
            </nav>
        </div>
    </div>
</div>
{% endif %} {% endblock %} {% block content %}
<article class="bg-site-card rounded-lg overflow-hidden">
    <!-- Makale başlığı ve meta bilgileri -->
    <div class="p-8 border-b border-border-card">
        <h1 class="text-3xl font-bold mb-4 text-text-primary">{{ article.title }}</h1>

        <!-- Çeviriler -->
        {{ translations.translations_for(article) }}

        <div class="flex flex-wrap items-center gap-4 text-sm text-text-secondary">
            <time datetime="{{ article.date.isoformat() }}" class="flex items-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                {{ article.locale_date }}
            </time>

            {% if article.modified %}
            <time datetime="{{ article.modified.isoformat() }}" class="flex items-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                {{ article.modified.strftime('%-d %B %Y') }}
            </time>
            {% endif %} {% if article.category %}
            <span class="flex items-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                </svg>
                <a
                    href="{{ SITEURL }}/kategori/{{ article.category.slug }}/"
                    class="hover:text-primary transition-colors">
                    {{ article.category }}
                </a>
            </span>
            {% endif %} {% if article.statistics is defined %}
            <span class="flex items-center" title="~{{ article.statistics.wc }} kelime">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                {{ article.statistics.wc }} kelime
            </span>

            <span class="flex items-center" title="Yaklaşık okuma süresi">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                {{ article.statistics.read_mins }} dakika
            </span>

            <span class="flex items-center" title="Flesch Reading Ease: {{ article.statistics.fi }}">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                </svg>
                Seviye {{ article.statistics.fk }}
            </span>
            {% endif %} {% if article.tags %}
            <div class="flex flex-wrap items-center gap-2">
                {% for tag in article.tags %}
                <a
                    href="{{ SITEURL }}/etiket/{{ tag.slug }}/"
                    class="px-2 py-1 text-xs bg-site-card-alt rounded-full hover:text-primary transition-colors">
                    #{{ tag }}
                </a>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>

    {% if article.series %}
    <div class="p-8 border-t border-border-card min-h-[100px]">
        <div class="flex flex-col gap-4">
            <p class="text-sm text-text-secondary">
                Bu "{{ article.series.name }}" serisinin {{ article.series.index }}. yazısıdır. Seri toplamda {{
                article.series.all|length }} bölümden oluşmaktadır.
            </p>
            <div class="flex flex-col gap-2">
                {% for article_in_series in article.series.all %}
                <div class="flex items-center gap-2">
                    {% if article_in_series == article %}
                    <span class="w-6 h-6 flex items-center justify-center bg-primary text-white rounded-full text-xs">
                        {{ loop.index }}
                    </span>
                    <span class="text-primary font-medium">{{ article_in_series.title }} (Şu anki yazı)</span>
                    {% else %}
                    <span
                        class="w-6 h-6 flex items-center justify-center bg-site-card-alt text-text-secondary rounded-full text-xs">
                        {{ loop.index }}
                    </span>
                    <a
                        href="{{ SITEURL }}/{{ article_in_series.url }}"
                        class="text-text-secondary hover:text-primary transition-colors">
                        {{ article_in_series.title }}
                    </a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Makale içeriği -->
    <div class="p-8">
        <div class="prose prose-lg dark:prose-invert max-w-none post-content">
            <script>
                // Makale içindeki tüm resimlere lazy loading ekle
                document.addEventListener("DOMContentLoaded", function () {
                    const images = document.querySelectorAll(".post-content img");
                    images.forEach((img) => {
                        img.setAttribute("loading", "lazy");
                        img.setAttribute("decoding", "async");

                        // Resim boyutları önceden belirlenmemişse, varsayılan genişlik ve yükseklik ata
                        if (!img.getAttribute("width") && !img.getAttribute("height")) {
                            img.setAttribute("width", "100%");
                            img.setAttribute("height", "auto");
                            img.style.aspectRatio = "auto";
                        }
                    });

                    // Paragraf elementlerine min-height değeri ekle
                    const paragraphs = document.querySelectorAll(".post-content p");
                    paragraphs.forEach((p) => {
                        p.style.minHeight = "1.5em";
                    });
                });
            </script>
            {{ article.content|safe }}
        </div>
    </div>

    <!-- Paylaşım Butonları -->
    <div class="p-8 border-t border-border-card min-h-[150px]">
        <div class="flex flex-col items-center space-y-4">
            <h3 class="text-xl font-bold text-text-primary">Bu Yazıyı Paylaşın</h3>
            <div class="flex flex-wrap justify-center gap-3">
                <!-- Twitter/X Paylaşım -->
                <a
                    href="https://twitter.com/intent/tweet?url={{ SITEURL }}/{{ article.url|urlencode }}&text={{ article.title|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('twitter', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#1da1f2]/10 text-[#1da1f2] hover:bg-[#1da1f2] hover:text-white transition-colors duration-300"
                    aria-label="Twitter'da paylaş">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
                    </svg>
                </a>

                <!-- Mastodon Paylaşım -->
                <a
                    href="https://mastodonshare.com/?text={{ article.title|urlencode }}%20{{ SITEURL }}/{{ article.url|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('mastodon', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#6364FF]/10 text-[#6364FF] hover:bg-[#6364FF] hover:text-white transition-colors duration-300"
                    aria-label="Mastodon'da paylaş">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545z" />
                    </svg>
                </a>

                <!-- Bluesky Paylaşım -->
                <a
                    href="https://bsky.app/intent/compose?text={{ article.title|urlencode }}%20{{ SITEURL }}/{{ article.url|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('bluesky', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Bluesky'da paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#0085FF]/10 text-[#0085FF] hover:bg-[#0085FF] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z" />
                    </svg>
                </a>

                <!-- Facebook Paylaşım -->
                <a
                    href="https://www.facebook.com/sharer/sharer.php?u={{ SITEURL }}/{{ article.url|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('facebook', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Facebook'ta paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#3b5998]/10 text-[#3b5998] hover:bg-[#3b5998] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                    </svg>
                </a>

                <!-- LinkedIn Paylaşım -->
                <a
                    href="https://www.linkedin.com/sharing/share-offsite/?url={{ SITEURL }}/{{ article.url|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('linkedin', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="LinkedIn'de paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#0077b5]/10 text-[#0077b5] hover:bg-[#0077b5] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                    </svg>
                </a>

                <!-- Reddit Paylaşım -->
                <a
                    href="https://www.reddit.com/submit?url={{ SITEURL }}/{{ article.url|urlencode }}&title={{ article.title|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('reddit', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Reddit'te paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#FF4500]/10 text-[#FF4500] hover:bg-[#FF4500] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z" />
                    </svg>
                </a>

                <!-- WhatsApp Paylaşım -->
                <a
                    href="https://wa.me/?text={{ article.title|urlencode }}%20{{ SITEURL }}/{{ article.url|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('whatsapp', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="WhatsApp'ta paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#25d366]/10 text-[#25d366] hover:bg-[#25d366] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
                    </svg>
                </a>

                <!-- Telegram Paylaşım -->
                <a
                    href="https://t.me/share/url?url={{ SITEURL }}/{{ article.url|urlencode }}&text={{ article.title|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('telegram', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Telegram'da paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#0088cc]/10 text-[#0088cc] hover:bg-[#0088cc] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.366.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z" />
                    </svg>
                </a>

                <!-- Tumblr Paylaşım -->
                <a
                    href="https://www.tumblr.com/widgets/share/tool?canonicalUrl={{ SITEURL }}/{{ article.url|urlencode }}&title={{ article.title|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('tumblr', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Tumblr'da paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#36465D]/10 text-[#36465D] hover:bg-[#36465D] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M14.563 24c-5.093 0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941 0 9.999 0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.325 1.594-4.06 1.594l-.178.002z" />
                    </svg>
                </a>

                <!-- Email Paylaşım -->
                <a
                    href="mailto:?subject={{ article.title|urlencode }}&body={{ article.title|urlencode }}%20{{ SITEURL }}/{{ article.url|urlencode }}"
                    onclick="event.preventDefault(); shareWithConsent('email', '{{ SITEURL }}/{{ article.url|urlencode }}', '{{ article.title|urlencode }}')"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="E-posta ile paylaş"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-[#EA4335]/10 text-[#EA4335] hover:bg-[#EA4335] hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </a>

                <!-- Kopyala butonu -->
                <button
                    onclick="copyArticleLink()"
                    aria-label="Bağlantıyı kopyala"
                    class="flex items-center justify-center w-10 h-10 rounded-full bg-primary/10 text-primary hover:bg-primary hover:text-white transition-colors duration-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                </button>
            </div>

            <!-- Kopyalandı bildirimi -->
            <div
                id="copyNotification"
                class="hidden fixed bottom-16 left-1/2 transform -translate-x-1/2 py-2 px-4 bg-primary text-white rounded-full shadow-lg transition-opacity duration-300">
                Bağlantı kopyalandı!
            </div>
        </div>
    </div>

    <!-- Bağış Çağrısı -->
    <div class="p-8 border-t border-border-card bg-gradient-to-br from-primary/5 via-transparent to-primary/5">
        <div class="flex flex-col items-center text-center space-y-6">
            <div class="flex items-center justify-center w-16 h-16 rounded-full bg-primary/10">
                <svg
                    class="w-8 h-8 text-primary"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
            </div>

            <div class="space-y-3">
                <h3 class="text-2xl font-bold text-text-primary">Bu Tür İçeriklerin Devamı İçin Destek Olun!</h3>
                <p class="text-text-secondary max-w-2xl">
                    Eğer paylaştığım içerikler size fayda sağlıyorsa ve aklınızdaki sorunların çözümlerine dair daha
                    fazla makale görmek istiyorsanız, bağış yaparak bu yolculukta bana destek olabilirsiniz. Her
                    katkınız, daha fazla içerik üretmem için motivasyon kaynağı olacaktır.
                </p>
            </div>

            <a
                href="{{ SITEURL }}/bagis/"
                aria-label="Bağış sayfasına git"
                class="group relative inline-flex items-center justify-center overflow-hidden rounded-lg bg-primary-dark px-8 py-3 font-bold text-white transition duration-300 ease-out hover:scale-105">
                <span
                    class="absolute inset-0 bg-gradient-to-r from-primary to-primary-dark transition-transform duration-300 ease-out group-hover:translate-y-12"></span>
                <span class="relative flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Destek Ol
                </span>
            </a>
        </div>
    </div>

    <!-- Makale sonu - Önceki/Sonraki bağlantılar -->
    <div class="p-8 border-t border-border-card">
        <div class="flex flex-col sm:flex-row justify-between gap-4">
            {% if article.prev_article %}
            <a
                href="{{ SITEURL }}/{{ article.prev_article.url }}"
                aria-label="Önceki yazı: {{ article.prev_article.title }}"
                class="flex items-center text-primary hover:text-primary-dark transition-colors group">
                <svg
                    class="w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                <span class="line-clamp-1">{{ article.prev_article.title }}</span>
            </a>
            {% endif %} {% if article.next_article %}
            <a
                href="{{ SITEURL }}/{{ article.next_article.url }}"
                aria-label="Sonraki yazı: {{ article.next_article.title }}"
                class="flex items-center text-primary hover:text-primary-dark transition-colors group ml-auto">
                <span class="line-clamp-1">{{ article.next_article.title }}</span>
                <svg
                    class="w-4 h-4 ml-2 transition-transform group-hover:translate-x-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </a>
            {% endif %}
        </div>
    </div>

    <!-- Benzer Yazılar Bölümü -->
    {% if article.related_posts %}
    <div class="p-8 border-t border-border-card">
        <div class="space-y-6">
            <h3 class="text-xl font-bold text-text-primary flex items-center gap-2">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                Benzer Yazılar
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                {% for related_post in article.related_posts %}
                <a href="{{ SITEURL }}/{{ related_post.url }}" class="group">
                    <div
                        class="bg-site-card-alt/50 rounded-lg overflow-hidden p-4 hover:bg-site-card-alt transition-all duration-300 group-hover:shadow-md border border-transparent group-hover:border-primary/10">
                        <h4 class="font-medium mb-2 text-text-primary group-hover:text-primary transition-colors">
                            {{ related_post.title }}
                        </h4>
                        <div class="flex items-center text-sm text-text-secondary">
                            <span class="flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                {{ related_post.locale_date }}
                            </span>

                            {% if related_post.category %}
                            <span class="mx-2">•</span>
                            <span class="flex items-center">{{ related_post.category }}</span>
                            {% endif %}
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
</article>
{% endblock %} {% block extra_js %}
<!-- TOC JavaScript -->
<script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/toc.min.js"></script>
<!-- Kod kopyalama JavaScript -->
<script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/copy-code.min.js"></script>
<script>
    function toggleTOC() {
        const modal = document.getElementById("tocModal");
        modal.classList.toggle("hidden");
    }

    // Sayfa dışına tıklandığında içindekiler kartını kapat
    document.addEventListener("click", function (event) {
        const modal = document.getElementById("tocModal");
        const tocButton = document.querySelector('[onclick="toggleTOC()"]');
        if (!modal.contains(event.target) && !tocButton.contains(event.target) && !modal.classList.contains("hidden")) {
            modal.classList.add("hidden");
        }
    });

    // TOC linklerine tıklandığında kartı kapat
    document.querySelectorAll("#tocModal .toc a").forEach((link) => {
        link.addEventListener("click", () => {
            document.getElementById("tocModal").classList.add("hidden");
        });
    });

    // Makale bağlantısını kopyala
    function copyArticleLink() {
        const articleUrl = window.location.href;
        navigator.clipboard
            .writeText(articleUrl)
            .then(() => {
                // Kopyalama başarılı olduğunda bildirim göster
                const notification = document.getElementById("copyNotification");
                notification.classList.remove("hidden");
                notification.classList.add("opacity-100");

                // 2 saniye sonra bildirimi gizle
                setTimeout(() => {
                    notification.classList.add("opacity-0");
                    setTimeout(() => {
                        notification.classList.add("hidden");
                        notification.classList.remove("opacity-0");
                    }, 300);
                }, 2000);
            })
            .catch((err) => {
                console.error("Bağlantı kopyalanamadı:", err);
                alert("Bağlantı kopyalanamadı. Lütfen tekrar deneyin.");
            });
    }

    // Sosyal medya paylaşımı için çerez izin kontrolü
    function shareWithConsent(platform, url, title) {
        // Çerez izni kontrolü
        const cookieConsent = localStorage.getItem("cookie-consent");

        if (cookieConsent === "accepted") {
            // İzin verilmiş, doğrudan paylaş
            shareContent(platform, url, title);
        } else {
            // İzin alınmamış, uyarı göster ve izin iste
            const confirmShare = confirm(
                "Sosyal medyada paylaşım yapabilmek için çerez kullanım iznine ihtiyacımız var. " +
                    "Çerez kullanımına izin vermek istiyor musunuz?"
            );

            if (confirmShare) {
                // Kullanıcı izin verdi
                localStorage.setItem("cookie-consent", "accepted");

                // Google Analytics ve diğer üçüncü taraf çerezlerini etkinleştir
                if (typeof gtag === "function") {
                    gtag("consent", "update", {
                        analytics_storage: "granted",
                        ad_storage: "granted",
                    });
                }

                // Paylaş
                shareContent(platform, url, title);
            }
        }
    }

    // Platforma göre paylaşım yap
    function shareContent(platform, url, title) {
        let shareUrl = "";

        switch (platform) {
            case "twitter":
                shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
                break;
            case "mastodon":
                shareUrl = `https://mastodonshare.com/?text=${title}%20${url}`;
                break;
            case "facebook":
                shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                break;
            case "linkedin":
                shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
                break;
            case "reddit":
                shareUrl = `https://www.reddit.com/submit?url=${url}&title=${title}`;
                break;
            case "whatsapp":
                shareUrl = `https://wa.me/?text=${title}%20${url}`;
                break;
            case "telegram":
                shareUrl = `https://t.me/share/url?url=${url}&text=${title}`;
                break;
            case "bluesky":
                shareUrl = `https://bsky.app/intent/compose?text=${title}%20${url}`;
                break;
            case "tumblr":
                shareUrl = `https://www.tumblr.com/widgets/share/tool?canonicalUrl=${url}&title=${title}`;
                break;
            case "email":
                shareUrl = `mailto:?subject=${title}&body=${title}%20${url}`;
                break;
            default:
                console.error("Bilinmeyen platform:", platform);
                return;
        }

        // Paylaşım penceresini aç
        window.open(shareUrl, "_blank", "width=600,height=400");
    }
</script>
{% endblock %}
